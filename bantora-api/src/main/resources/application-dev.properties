#
# Created by Cascade AI
# Author       : Tsungai Kaviya
# Copyright    : TeraTech Solutions (Pvt) Ltd
# Date/Time    : 2025-11-28
# Email        : tkaviya@t3ratech.co.zw
#

# Development logging
logging.level.com.t3ratech.bantora=DEBUG
logging.level.org.springframework=INFO
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Database configuration (PostgreSQL with R2DBC)
spring.r2dbc.url=r2dbc:postgresql://bantora-database:${DB_INTERNAL_PORT}/${DB_NAME}
spring.r2dbc.username=${DB_USERNAME}
spring.r2dbc.password=${DB_PASSWORD}
spring.r2dbc.pool.initial-size=10
spring.r2dbc.pool.max-size=50

# JPA configuration for Flyway and schema validation
spring.datasource.url=jdbc:postgresql://bantora-database:${DB_INTERNAL_PORT}/${DB_NAME}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false

# Flyway configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# Redis configuration
spring.data.redis.host=bantora-redis
spring.data.redis.port=${REDIS_INTERNAL_PORT}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.timeout=60000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# JWT configuration
bantora.security.jwt.secret=${BANTORA_JWT_SECRET}
bantora.security.jwt.access-token.expiration-ms=${BANTORA_JWT_ACCESS_TOKEN_EXPIRATION_MS}
bantora.security.jwt.refresh-token.expiration-ms=${BANTORA_JWT_REFRESH_TOKEN_EXPIRATION_MS}
bantora.security.jwt.issuer=${BANTORA_JWT_ISSUER}
bantora.security.jwt.audience=${BANTORA_JWT_AUDIENCE}

# Argon2id configuration
bantora.security.argon2.iterations=${BANTORA_ARGON2_ITERATIONS}
bantora.security.argon2.memory=${BANTORA_ARGON2_MEMORY}
bantora.security.argon2.parallelism=${BANTORA_ARGON2_PARALLELISM}
bantora.security.argon2.salt-length=${BANTORA_ARGON2_SALT_LENGTH}
bantora.security.argon2.hash-length=${BANTORA_ARGON2_HASH_LENGTH}

# CORS configuration
bantora.security.cors.allowed-origins=${BANTORA_ALLOWED_ORIGINS}

# SMS configuration
bantora.sms.provider=${BANTORA_SMS_PROVIDER}
bantora.sms.account-sid=${BANTORA_SMS_ACCOUNT_SID}
bantora.sms.auth-token=${BANTORA_SMS_AUTH_TOKEN}
bantora.sms.from-number=${BANTORA_SMS_FROM_NUMBER}
bantora.sms.verification-code.length=${BANTORA_SMS_VERIFICATION_CODE_LENGTH}
bantora.sms.verification-code.expiry-minutes=${BANTORA_SMS_VERIFICATION_CODE_EXPIRY_MINUTES}
bantora.sms.verification-code.max-attempts=${BANTORA_SMS_MAX_ATTEMPTS}

# Rate limiting configuration
bantora.rate-limit.enabled=${BANTORA_RATE_LIMIT_ENABLED}
bantora.rate-limit.requests-per-minute=${BANTORA_RATE_LIMIT_REQUESTS_PER_MINUTE}
bantora.rate-limit.burst-capacity=${BANTORA_RATE_LIMIT_BURST_CAPACITY}

# Multi-language configuration
bantora.i18n.default-locale=${BANTORA_DEFAULT_LOCALE}
bantora.i18n.supported-locales=${BANTORA_SUPPORTED_LOCALES}

# Poll configuration
bantora.poll.min-options=${BANTORA_POLL_MIN_OPTIONS}
bantora.poll.max-options=${BANTORA_POLL_MAX_OPTIONS}
bantora.poll.min-duration-hours=${BANTORA_POLL_MIN_DURATION_HOURS}
bantora.poll.max-duration-days=${BANTORA_POLL_MAX_DURATION_DAYS}
bantora.poll.approval-required=${BANTORA_POLL_APPROVAL_REQUIRED}
bantora.poll.ai-moderation-enabled=${BANTORA_POLL_AI_MODERATION_ENABLED}

# Springdoc OpenAPI configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
